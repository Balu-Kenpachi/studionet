<link rel='stylesheet' href='/user/stylesheets/modal-style.css' />
<!--<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>-->
<div class="modal fade" display='block'>
  <div class="modal-dialog modal-lg" ng-repeat='contribution in data'>
    <div id="{{ 'modal' + contribution.db_data.id }}" class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" ng-click="close()" data-dismiss="modal" aria-hidden="true">&times;</button>
          <h3 class='content-modal'>{{contribution.db_data.title}}</h3> 
        </div>
        <div class="modal-body">
          <div class='row'>
            <div class='col-sm-4'>
              <div>
                <div id='second-cy'></div>
                <hr>
                <button type="button" ng-hide='hideReplyButton' ng-click="showCreateContribution=true; hideReplyButton=true; contributionData={};contributionData.tags=[]" class="btn btn-primary">Reply to...</button>
                <button type="button" ng-show='hideReplyButton' ng-click="showCreateContribution=false; hideReplyButton=false" class="btn btn-primary">Cancle</button>
                <button type="button" ng-click="updateContribution()" class="btn btn-primary">Update</button>
                <button type="button" ng-click="deleteContribution(contribution.db_data.id)" class="btn btn-primary">Delete</button>
              </div>
            </div>
            <div class='col-sm-8'>
              <div class='row'>
                <ul class="nav nav-tabs pull-right">
                  <li class="active"><a data-target="{{ '#content' + contribution.db_data.id}}" data-toggle="tab">Content</a></li>
                  <li><a data-target="{{ '#statistics' + contribution.db_data.id}}"  data-toggle="tab">Statistics</a></li>
                </ul>
              </div>
              <div class="tab-content">
                <div class='tab-pane fade in active' id="{{ 'content' + contribution.db_data.id}}">
                  <b>Contribution's id: </b>{{contribution.id}}
                  <br><br>
                  <b>Contribution's type: </b>{{contribution.type}}
                  <br><br>
                  <b>Contribution's title: </b>{{contribution.db_data.title}} 
                  <br><br>
                  <b>Contribution's content: </b>{{contribution.db_data.body}} 
                  <br><br>
                </div>
                <div class='tab-pane fade' id="{{ 'statistics' + contribution.db_data.id}}">
                    <h3>This is the column for contributions' statistics.</h3>
                </div>
                <button type="button" ng-click="scrollTo()" class="btn btn-primary btn-block" data-dismiss="modal">Close</button>
                </div>
            </div>
          </div>
          <div class='editor' ng-show='showCreateContribution'>
                <br>
                <label> Contribution Title: </label>
                <br>
                <input class='wide' value='Title' ng-model="contributionData.title"></input>
                <br><br>
                <label> Contribution Content: </label>
                <br>
                <textarea class='wide' rows="10" cols="70" ng-model="contributionData.body"></textarea>
                <br><br>
                <label for="singleSelect"> Relationship: </label>
                <select name="singleSelect" id="singleSelect" ng-model=contributionData.refType>
					        <option ng-repeat="rel in relationships | filter: { src_type: 'contribution', 
					      													 target_type: 'contribution'}" 
					      													 value={{rel.name}}>{{rel.name}}</option>
					      </select>
                <br><br>
                <label> Tags: </label><br>
                <select class='tag-list' rows="10" ng-model="contributionData.tags" multiple>
                  <option ng-repeat="tag in tags" value="{{tag.name}}">{{tag.name}}</option>
                </select>

                <input class="addTag" ng-model="tag"></input><button ng-click="contributionData.tags.push(tag)">Add a Tag</button>
                <br>
                <span><b> Selected tag names:  </b></span> 
						    <span>{{ contributionData.tags }}</span>
                <br>
                <button type="button" ng-click="contributionData.ref=contribution.db_data.id;
                createContribution(contributionData); showCreateContribution=false; hideReplyButton=false" class="btn btn-primary">Submit</button>
          </div>
        </div>
    </div>
  </div>
</div>